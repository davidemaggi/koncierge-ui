@using KonciergeUi.Client.Components.Layout.Modals
@inject IDialogService DialogService
@inject IAppVersionProvider VersionProvider

<MudStack Justify="Justify.SpaceBetween" AlignItems="AlignItems.Center" StretchItems="StretchItems.Middle" Row>
    
    <MudStack  Class="pl-5" Spacing="1" AlignItems="AlignItems.Center" Row><MudText Align="Align.Left" Typo="Typo.body1">@VersionLabel - Annabelle </MudText> <MudIcon Icon="@KonciergeIcons.Color.Ananbelle"/><MudIconButton Icon="@Icons.Material.Outlined.Info" Color="Color.Primary" OnClick="OpenInfo"  /></MudStack>
    <MudStack Justify="Justify.Center" Spacing="1" AlignItems="AlignItems.Center" Row><MudText Align="Align.Center" Typo="Typo.body1">Made with</MudText><MudIcon Icon="@KonciergeIcons.Color.Love"/><MudText Align="Align.Center" Typo="Typo.body1">in</MudText><MudIcon Icon="@KonciergeIcons.Flags.Italy"/></MudStack>
    <MudButton  Class="pr-5" IconColor="Color.Error" StartIcon="@Icons.Material.Filled.BugReport" OnClick="OpenGithub">Report an Issue</MudButton>
</MudStack>
@code {


    private async Task OpenInfo()
    {
        var parameters = new DialogParameters<InfoDialog>
        {
            //{ x => x._containerPort, cp },

           
        };

        var options = new DialogOptions() { CloseButton = true, MaxWidth = MaxWidth.Medium };

        var dialog= await DialogService.ShowAsync<InfoDialog>(null, parameters, options);
        
        var result = await dialog.Result;

       

    }
    
    
    private async Task OpenGithub(MouseEventArgs arg)
    {
        try
        {
            Uri uri = new Uri("https://github.com/davidemaggi/koncierge-ui/issues");
            await Browser.Default.OpenAsync(uri, BrowserLaunchMode.SystemPreferred);
        }
        catch (Exception ex)
        {
            // An unexpected error occurred. No browser may be installed on the device.
        }    }

    private string VersionLabel => $"v{VersionProvider.DisplayVersion ?? "dev"}";
}